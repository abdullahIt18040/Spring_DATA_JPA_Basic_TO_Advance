Transaction Synchronization ржХрзА?

Transaction Synchronization ржорж╛ржирзЗ рж╣рж▓рзЛ
ЁЯСЙ Transaction ржЪрж▓рж╛ржХрж╛рж▓рзАржи ржмрж╛ Transaction рж╢рзЗрж╖ рж╣ржУрзЯрж╛рж░ ржЖржЧрзЗ/ржкрж░рзЗ ржХрж┐ржЫрзБ ржирж┐рж░рзНржжрж┐рж╖рзНржЯ ржХрж╛ржЬ (callback) execute ржХрж░рж╛ред

Spring ржЖржорж╛ржжрзЗрж░ ржХрж┐ржЫрзБ hook point ржжрзЗрзЯ, ржпрзЗржоржиржГ

Transaction рж╢рзБрж░рзБ рж╣рж▓рзЗ

Commit рж╣ржУрзЯрж╛рж░ ржЖржЧрзЗ

Commit рж╕ржлрж▓ рж╣рж▓рзЗ

Rollback рж╣рж▓рзЗ

Transaction рж╢рзЗрж╖ рж╣рж▓рзЗ

ржПржЗ ржХрж╛ржЬржЧрзБрж▓рзЛ ржЖржорж░рж╛ TransactionSynchronizationManager ржмрзНржпржмрж╣рж╛рж░ ржХрж░рзЗ ржХрж░рждрзЗ ржкрж╛рж░рж┐ред

ЁЯФ╣ ржХрзЗржи Transaction Synchronization ржжрж░ржХрж╛рж░?

ржХрж┐ржЫрзБ ржХрж╛ржЬ ржЖржЫрзЗ ржпрзЗржЧрзБрж▓рзЛ ржЖржорж░рж╛ ржЪрж╛ржЗтАФ

тЬФя╕П рж╢рзБржзрзБ рждржЦржиржЗ ржЪрж▓рзБржХ, ржпржЦржи Transaction рж╕ржлрж▓ржнрж╛ржмрзЗ commit рж╣ржмрзЗ
тЬФя╕П Rollback рж╣рж▓рзЗ ржЪрж▓ржмрзЗ ржирж╛
тЬФя╕П DB commit рж╣ржУрзЯрж╛рж░ ржкрж░ notification ржкрж╛ржарж╛ржирзЛ
тЬФя╕П Cache update ржХрж░рж╛
тЬФя╕П Kafka / RabbitMQ message ржкрж╛ржарж╛ржирзЛ

тЭМ ржпржжрж┐ Transaction fail ржХрж░рзЗ, рждрж╛рж╣рж▓рзЗ ржПржЗ ржХрж╛ржЬржЧрзБрж▓рзЛ execute рж╣ржУрзЯрж╛ ржЙржЪрж┐ржд ржирж╛

ржПржЗ рж╕ржорж╕рзНржпрж╛рж░ рж╕ржорж╛ржзрж╛ржиржЗ рж╣рж▓рзЛ Transaction Synchronization

ЁЯФ╣ Real Life Example

ржзрж░рж┐ ржЖржкржирж┐ ржПржХржЯрж┐ Order Service ржмрж╛ржирж╛ржЪрзНржЫрзЗржи

1я╕ПтГг Order database ржП save рж╣рж▓рзЛ
2я╕ПтГг Transaction commit рж╣рж▓рзЛ
3я╕ПтГг рждрж╛рж░ржкрж░ Customer ржХрзЗ Notification ржкрж╛ржарж╛ржирзЛ рж╣ржмрзЗ

тЭЧ ржпржжрж┐ Order save ржХрж░рж╛рж░ рж╕ржорзЯ error рж╣рзЯ тЖТ transaction rollback рж╣ржмрзЗ тЖТ notification ржкрж╛ржарж╛ржирзЛ ржпрж╛ржмрзЗ ржирж╛
